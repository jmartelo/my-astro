---
import { getCollection } from 'astro:content';
import BaseLayout from '../layouts/BaseLayout.astro';

const allLandscapes = await getCollection('landscapes');
const featured = allLandscapes.filter(l => l.data.featured);
const sorted = allLandscapes.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<BaseLayout title="Landscapes">
  <section class="max-w-7xl mx-auto px-6 py-16">
    <h1 class="text-5xl md:text-6xl font-bold text-center mb-16">Landscapes</h1>

    <!-- Destacados grandes -->
    {featured.length > 0 && (
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 mb-20">
        {featured.map(item => (
          <a href={`/landscapes/${item.slug}`} class="group">
            <img src={item.data.heroImage} alt={item.data.title} class="w-full h-96 md:h-full object-cover rounded-xl shadow-2xl group-hover:scale-105 transition duration-500" />
            <div class="mt-6">
              <h2 class="text-3xl font-semibold">{item.data.title}</h2>
              <p class="text-gray-600 text-lg">{item.data.location}</p>
            </div>
          </a>
        ))}
      </div>
    )}

    <!-- Grid de todos -->
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8">
      {sorted.map(item => (
        <a href={`/landscapes/${item.slug}`} class="group block">
          <img src={item.data.thumbnail || item.data.heroImage} alt={item.data.title} class="w-full h-64 object-cover rounded-lg shadow-lg group-hover:shadow-2xl transition" />
          <h3 class="mt-4 text-xl font-medium">{item.data.title}</h3>
          <p class="text-sm text-gray-600">{item.data.location}</p>
        </a>
      ))}
    </div>
  </section>
</BaseLayout>
